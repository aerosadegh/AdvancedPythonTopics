# Python's new Protocols (Structural subtyping), Abstract Base Classes, and Factories

## Motivation

have two function for upload and download

```python

# upload some data
upload(data, path_to_upload)

# download some data
data = download(path_to_download)
```

## The naive way

```python

# upload some data
if version == "old":
  upload(data, path_to_upload)
elif version == "new":
  new_upload(data, path_to_upload)
else:
  raise NotImplementedError(f"{version=} not supported")

# download some data
if version == "old":
  data = download(path_to_download)
elif version == "new":
  data = new_download(path_to_downlaoad)
else:
  raise NotImplementedError(f"{version=} not supported")
```

## Dive in code

[code](03.1-protocol.py)

-------------

<div dir="auto">

<h2>ABS or Protocols</h2>
from [<a href="https://jellis18.github.io/post/2022-01-11-abc-vs-protocol/">here</a>]

<h3 dir="auto"> ฺฉูุงุณโูุง ูพุงู ุงูุชุฒุงุน(ABC) </h3>
<ul dir="auto" align="justify">
<li> ูุชุนูู ุจู ุฒุฑ ฺฉูุงุณโูุง ุขููุง ุงุณุช. ABC ุจู ุฎูุฏ ุฎูุฏ ูุงุจู ุงุณุชูุงุฏู ูุณุชุ ููุท ุจุง ูพุงุฏูโุณุงุฒ ฺฉ ฺฉูุงุณ ูุฑุฒูุฏ ูุงุจู ุงุณุชูุงุฏู ูุณุชูุฏ. ุจูุงุจุฑุงู ุจู ุงู ุฏููุ ABCโโุฎูุฏ ุจู ุนููุงู ุจุฎุด ุงุฒ ฺฉ ุณูุณูู ูุฑุงุชุจ ฺฉูุงุณ ุฏูู ุชุนูู ุฏุงุฑูุฏ. </li>
<li> ABCโูุง ูฺฉุงูุณู ุฎูุจ ุจุฑุง ุงุณุชูุงุฏู ูุฌุฏุฏ ุงุฒ ฺฉุฏ ูุณุชูุฏุ ุจู ุฎุตูุต ุจุฑุง ฺฉุฏ ุง ููุทู boilerplate ฺฉู ุจุฑุง ูฺ (ุง ุงฺฉุซุฑ) ุฒุฑ ฺฉูุงุณโูุง ุชุบุฑ ููโฺฉูุฏ. ุจูุชุฑู ุงุณุชุฑุงุชฺ ุฏุฑ ุงูุฌุง ุงู ุงุณุช ฺฉู ABC (ุจู ุนููุงู ูุซุงู ฺฉูุงุณ ูุงูุฏู) ุจุดุชุฑ ฺฉุงุฑูุง ุฑุง ุงูุฌุงู ุฏูุฏ ู ุงุฒ ูุฑุฒูุฏูุง ุจุฎูุงูู ฺฉู ููุงุฑุฏ ุฎุงุต ุฑุง ุงุฌุฑุง ฺฉููุฏ. </li>
<li> ุจุฑุง ุงุนุชุจุงุฑ ุณูุฌ ุฒูุงู ูุงูุน ููฺฏุงู ุงุฌุงุฏ ฺฉ ููููู ุงุฒ ฺฉูุงุณ ูุฑุฒูุฏ ุฎูุจ ุงุณุช. ููุงูุทูุฑ ฺฉู ุฏุฑ ุจุงูุง ุฏุฏูุ ุงฺฏุฑ ูุฑุฒูุฏ ููู ุฑูุดโูุง ุงูุชุฒุงุน ุฑุง ูพุงุฏูโุณุงุฒ ูฺฉูุฏุ ABCูุง ุฏุฑ ุงุฌุงุฏ ุฎุทุง ุงุฌุงุฏ ูโฺฉููุฏ. </li>
</ul>

<h3 dir="auto"> ูพุฑูุชฺฉูโูุง(Protocols) </h3>
<ul dir="auto" align="justify">
<li> ูุชุนูู ุจู ุฌุง ฺฉู ุงุฒ ุขููุง ุงุณุชูุงุฏู ูโุดูุฏ. ููุงูุทูุฑ ฺฉู ุฏุฑ ุจุงูุง ุฏุฏูุ ูพุฑูุชฺฉูโูุง "ูพุงุฏู ุณุงุฒ" ููโุดููุฏ ุจูฺฉู ุจู ฺฉุฏูุง ูพุงู ุฏุณุช (ูุงููุฏ ุณุงุฑ ุชูุงุจุน ุง ฺฉูุงุณโูุง) ูโฺฏููุฏ ฺฉู ุงูุชุธุงุฑ ููฐุฑูุฏ ุณุงุฎุชุงุฑ ุด ูุฑูุฏ ฺฺฏููู ุจุงุดุฏ. ููฺููุ ุฏุฏู ฺฉู ุจุณุชู ุจู ุขูฺู ููุฑุฏ ูุงุฒ ุงุณุชุ ูโุชูุงูู ฺูุฏู ูพุฑูุชฺฉู ุจุฑุง ฺฉ ููุน ุด ุชุนุฑู ฺฉูู. ุงู ุจุฏุงู ูุนูุงุณุช ฺฉู ูพุฑูุชฺฉูโูุง ุจู ุฌุง ุชุนูู ุฏุงุฑูุฏ ฺฉู ุงุณุชูุงุฏู ูโุดููุฏ. </li>
<li> ุจุฑุง ุชุนุฑู ุฑุงุจุทโูุง ุฎูุจ ุงุณุชุ ุจูโูฺู ุจุฑุง ฺฉุชุงุจุฎุงููโูุง ุดุฎุต ุซุงูุซุ ุฒูุงู ฺฉู ููโุฎูุงูู ฺฉุฏ ุฎูุฏ ุฑุง ุจู ฺฉ ฺฉุชุงุจุฎุงูู ุดุฎุต ุซุงูุซ ุฎุงุต ูุชุตู ฺฉูู. </li>
<li> ุฎูุจ ุจูุฏู (ุง ุจฺฏูุฆู ูุงูุนุง ุชููุง ุฑุงู) ุจุฑุง ุชุนู ูุญุฏูุฏูโูุง ููุน ุนููู ุงูุนุทุงู ูพุฐุฑ. </li>
<li> ุงู ููุฑุฏ ูุฒ ูุงฺฏูุชู ููุงูุฏ ฺฉู ูพุฑูุชฺฉูโูุง ููุท ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ ุญุงุดูโููุณโูุง ููุน ููุฏ ูุณุชูุฏ ู ููโุชูุงู ุขููุง ุฑุง ุจู ุฑูุด ุฏฺฏุฑ (ุจู ุฌุฒ runtime_checkable) ุงุณุชูุงุฏู ฺฉุฑุฏ. </li>

</ul>

<h2 dir="auto">  ฺฉุงุฑุจุฑุฏูุง </h2>

<ul dir="auto" align="justify">

<li> ุงฺฏุฑ ูโุฎูุงูุฏ ุฏูุจุงุฑู ุงุฒ ฺฉุฏ ุงุณุชูุงุฏู ฺฉูุฏ ุงุฒ ABC ุงุณุชูุงุฏู ฺฉูุฏ. ูุฑุงุซุช ููุดู ุจูุชุฑู ุฑูุด ุงุณุชูุงุฏู ูุฌุฏุฏ ุงุฒ ฺฉุฏ ูุณุชุ ุงูุง ู ุชูุงูุฏ ุจุณุงุฑ ููุฏ ุจุงุดุฏ. </li>
<li>  ุงฺฏุฑ ุจู ุณูุณูู ูุฑุงุชุจ ฺฉูุงุณ ุฏูู ูุงุฒ ุฏุงุฑุฏ (ููุงูุทูุฑ ฺฉู ุจุงุฏ ุงุฒ ุชุฑุชุจ ุชูฺฉฺฉ ุฑูุด ุงุณุชูุงุฏู ฺฉูุฏ ุง ุจุงุฏ <code>__subclasses__</code> ุฑุง ุจุฑุฑุณ ฺฉูุฏ) ุฏุฑ ฺฉุฏ ุฎูุฏ ุงุฒ ABC ุงุณุชูุงุฏู ฺฉูุฏ. </li>
<li>  ุงฺฏุฑ ุจู ฺูุฏู ูพุงุฏู ุณุงุฒ ฺฉ ฺฉูุงุณ ุจุง ฺูุฏู ูุชุฏ ูุงุฒ ุฏุงุฑุฏ ุงุฒ ABC ุงุณุชูุงุฏู ฺฉูุฏ. </li>
<li>  ุงุฒ ูพุฑูุชฺฉูโูุง ุจุฑุง ุงุฏุฏุงุดุชโูุง ููุน ุณุฎุชโฺฏุฑุงูู ุงุณุชูุงุฏู ฺฉูุฏ (ุนู ููุท ุฑูุดโูุง/ูฺฺฏโูุง ููุฑุฏ ูุงุฒ ุฎูุฏ ุฑุง ุญุงุดูโููุณ ฺฉูุฏ) </li>
<li>  ุงุฒ ูพุฑูุชฺฉูโูุง ุจุฑุง ูุญุฏูุฏุชโูุง ุนููู ุงุณุชูุงุฏู ฺฉูุฏ
* ุงุฒ ูพุฑูุชฺฉูโูุง ุจุฑุง ุฑุงุจุทโูุง ุงูุชุฒุงุน ุจุฑุง ฺฉุชุงุจุฎุงููโูุง ุดุฎุต ุซุงูุซ ุงุณุชูุงุฏู ฺฉูุฏ. ๐คฉ </li>
</ul>
</div>
